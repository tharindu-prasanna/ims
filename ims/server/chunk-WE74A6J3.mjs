import './polyfills.server.mjs';
import{a as F}from"./chunk-52NCYLCF.mjs";import{a as ve,g as P,h as G}from"./chunk-62CMOTVT.mjs";import{a as he}from"./chunk-PLUKXKJG.mjs";import{g as Se,h as De,i as xe,j as we,k as Ce}from"./chunk-SS322TVC.mjs";import{b as U,c as g,e as O,f as $,g as _,h as I,j as q,k as Q,l as H,n as ye,o as T,p as be}from"./chunk-7JVHZBVB.mjs";import{a as ce,b as ue}from"./chunk-W5HN67AE.mjs";import"./chunk-7K6YOVJS.mjs";import"./chunk-AUOO4LHJ.mjs";import{f as D,j as x,m as pe,p as w,q as me,t as fe,u as C,v as ge}from"./chunk-7U7S3VU4.mjs";import{$ as l,Aa as Y,Ba as a,C as j,Ca as v,D as k,Eb as de,Ha as z,Ob as le,Qa as J,Rb as N,Sa as W,Sb as S,Ua as ne,Ub as X,Va as re,Xa as oe,_ as p,a as y,ha as u,i as B,na as ie,oa as n,pa as o,qa as m,s as ee,t as V,ua as K,v as te,wa as h,wb as se,x as b,xa as A,xb as ae,y as L}from"./chunk-PNPWMYXX.mjs";import{a as R}from"./chunk-KRLCULJA.mjs";var E=(()=>{let i=class i{constructor(t){this.http=t,this.apiUrl=he.apiURL}getDesignations(){return this.http.get(`${this.apiUrl}/designations`)}getDesignation(t){return this.http.get(`${this.apiUrl}/designations/edit/${t}`)}setDesignation(t){return this.http.post(`${this.apiUrl}/designations`,t)}updateDesignation(t){return this.http.put(`${this.apiUrl}/designations/edit`,t)}deleteDesignation(t){return this.http.delete(`${this.apiUrl}/designations/delete/${t}`)}};i.\u0275fac=function(e){return new(e||i)(te(de))},i.\u0275prov=ee({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();var Ne=["filter"];function Pe(s,i){if(s&1){let f=K();n(0,"div",13)(1,"button",14),h("click",function(){j(f);let e=A(),r=Y(12);return k(e.clear(r))}),o(),n(2,"span",15),m(3,"i",16),n(4,"input",17,18),h("input",function(e){j(f);let r=A(),d=Y(12);return k(r.onGlobalFilter(d,e))}),o()()()}}function Ge(s,i){s&1&&(n(0,"tr")(1,"th",19)(2,"div",20),a(3," Code "),n(4,"div",21),m(5,"p-sortIcon",22)(6,"p-columnFilter",23),o()()(),n(7,"th",24)(8,"div",20),a(9," Description "),n(10,"div",21),m(11,"p-sortIcon",25)(12,"p-columnFilter",26),o()()(),n(13,"th",27)(14,"div",20),a(15," Created At "),n(16,"div",21),m(17,"p-sortIcon",28)(18,"p-columnFilter",29),o()()(),n(19,"th",30)(20,"div",20),a(21," Created By "),n(22,"div",21),m(23,"p-sortIcon",31)(24,"p-columnFilter",32),o()()(),n(25,"th",33)(26,"div",34),a(27," Updated At "),n(28,"div",21),m(29,"p-sortIcon",35)(30,"p-columnFilter",36),o()()(),n(31,"th",37)(32,"div",20),a(33," Updated By "),n(34,"div",21),m(35,"p-sortIcon",38)(36,"p-columnFilter",39),o()()(),n(37,"th",33)(38,"div",40),a(39,"Actions"),o()()())}function Ue(s,i){if(s&1){let f=K();n(0,"tr")(1,"td"),a(2),o(),n(3,"td"),a(4),o(),n(5,"td",41),a(6),J(7,"date"),o(),n(8,"td",41),a(9),o(),n(10,"td",41),a(11),J(12,"date"),o(),n(13,"td",41),a(14),o(),n(15,"td")(16,"div",42)(17,"p-button",43),h("click",function(e){let d=j(f).$implicit,c=A();return k(c.onEdit(e,d._id))}),o(),n(18,"p-button",44),h("click",function(e){let d=j(f).$implicit,c=A();return k(c.onDelete(e,d._id))}),o()()()()}if(s&2){let f=i.$implicit;p(2),v(f.code),p(2),v(f.description),p(2),v(W(7,10,f.createdAt,"yyyy-MM-dd")),p(3),v(f.createdBy),p(2),v(W(12,13,f.updatedAt,"yyyy-MM-dd")),p(3),v(f.updatedBy),p(3),u("rounded",!0)("text",!0),p(1),u("rounded",!0)("text",!0)}}function Oe(s,i){s&1&&(n(0,"tr")(1,"td",45),a(2,"No designations found."),o()())}function $e(s,i){s&1&&(n(0,"tr")(1,"td",45),a(2,"Loading designations. Please wait."),o()())}var qe=()=>[10,25,50,100,250],Qe=()=>["code","description","createdAt","createdBy","updatedAt","updatedBy"],je=(()=>{let i=class i{constructor(t,e,r,d,c){this.router=t,this.confirmationService=e,this.messageService=r,this.designationService=d,this.encryptionService=c,this.designations=[],this.loading=!1,this.subscription=new y}ngOnInit(){this.getDesignations()}ngOnDestroy(){this.subscription.unsubscribe()}getDesignations(){this.loading=!0,this.subscription=this.designationService.getDesignations().pipe(B(t=>t.message),B(t=>{let e=["code","description","createdBy"];return t.map(r=>{let d=R({},r);return this.encryptionService.decryptObjectValues(d,e),d})})).subscribe(t=>{this.designations=t,this.loading=!1},t=>{this.messageService.add({closable:!1,life:6e3,icon:"pi pi-times",summary:t.error.message}),this.loading=!1})}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}clear(t){t.clear(),this.filter.nativeElement.value=""}onEdit(t,e){this.router.navigate(["/system_data/designations/edit",e])}onDelete(t,e){this.confirmationService.confirm({target:t.target,message:"Are you sure to delete this designation?",icon:"pi pi-exclamation-triangle",accept:()=>{this.loading=!0,this.subscription=this.designationService.deleteDesignation(e).subscribe(r=>{this.loading=!1,this.getDesignations(),this.messageService.add({closable:!1,life:6e3,icon:"pi pi-check",summary:r.message})},r=>{this.loading=!1,this.messageService.add({closable:!1,life:6e3,icon:"pi pi-times",summary:r.error.message})})}})}};i.\u0275fac=function(e){return new(e||i)(l(N),l(D),l(x),l(E),l(F))},i.\u0275cmp=b({type:i,selectors:[["app-designations"]],viewQuery:function(e,r){if(e&1&&re(Ne,5),e&2){let d;ne(d=oe())&&(r.filter=d.first)}},decls:18,vars:11,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[1,"md:flex","md:justify-content-between","mb-3"],[1,"mb-3","md:mb-0"],["pRipple","","icon","pi pi-plus","label","Add New Designation","routerLink","/system_data/designations/add",1,"w-full","md:max-w-fit",3,"raised"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","responsiveLayout","scroll","styleClass","p-datatable-gridlines",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","loading","rowHover","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search Keyword",1,"w-full",3,"input"],["filter",""],["pSortableColumn","code",2,"min-width","8rem"],[1,"flex","justify-content-between","align-items-center"],[1,"flex","vertically-center","gap-2"],["field","code"],["type","text","field","code","display","menu","placeholder","Search by code"],["pSortableColumn","description",2,"min-width","14rem"],["field","description"],["type","text","field","description","display","menu","placeholder","Search by description"],["pSortableColumn","createdAt",2,"min-width","8rem"],["field","createdAt"],["type","text","field","createdAt","display","menu","placeholder","Search by created date"],["pSortableColumn","createdBy",2,"min-width","8rem"],["field","createdBy"],["type","text","field","createdBy","display","menu","placeholder","Search by user created by"],[2,"min-width","8rem"],["pSortableColumn","updatedAt",1,"flex","justify-content-between","align-items-center"],["field","updatedAt"],["type","text","field","updatedAt","display","menu","placeholder","Search by updated date"],["pSortableColumn","updatedBy",2,"min-width","8rem"],["field","updatedBy"],["type","text","field","updatedBy","display","menu","placeholder","Search by user updated by"],[1,"flex","justify-content-center","align-items-center"],[1,"text-center"],[1,"flex","flex-wrap","gap-2","justify-content-center","align-items-center"],["pRipple","","icon","pi pi-pencil","pTooltip","Edit designation","tooltipPosition","top",3,"rounded","text","click"],["pRipple","","severity","danger","icon","pi pi-trash","pTooltip","Delete designation","tooltipPosition","top",3,"rounded","text","click"],["colspan","12"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h5"),a(6,"Manage Designations"),o(),n(7,"p",4),a(8,"You can view, search, and edit designations details through this page."),o()(),n(9,"div"),m(10,"p-button",5),o()(),n(11,"p-table",6,7),ie(13,Pe,6,0,"ng-template",8)(14,Ge,40,0,"ng-template",9)(15,Ue,19,16,"ng-template",10)(16,Oe,3,0,"ng-template",11)(17,$e,3,0,"ng-template",12),o()()()()),e&2&&(p(10),u("raised",!0),p(1),u("value",r.designations)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",z(9,qe))("loading",r.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",z(10,Qe)))},dependencies:[S,fe,C,pe,Se,De,xe,we,w,T,ce,se]});let s=i;return s})();var ke=(()=>{let i=class i{constructor(t,e,r,d,c){this.confirmationService=t,this.messageService=e,this.utilityService=r,this.designationService=d,this.encryptionService=c,this.transferData=!1,this.submitBtnIcon="pi pi-plus",this.submitBtnLabel="Add Designation",this.subscription=new y,this.addDesignationForm=new _({})}ngOnInit(){this.addDesignationForm=new _({code:new I("",[g.required,this.utilityService.trimmedEmptyValidator,g.maxLength(20)]),description:new I("",[g.required,this.utilityService.trimmedEmptyValidator,g.maxLength(80)])})}ngOnDestroy(){this.subscription.unsubscribe()}setDataTransferStatus(){this.addDesignationForm.disable(),this.transferData=!0,this.submitBtnIcon="pi pi-spinner pi-spin",this.submitBtnLabel="Please wait"}unsetDataTransferStatus(){this.addDesignationForm.enable(),this.transferData=!1,this.submitBtnIcon="pi pi-plus",this.submitBtnLabel="Add Designation"}getFormData(){return{code:this.encryptionService.encryptData(this.addDesignationForm.get("code").value),description:this.encryptionService.encryptData(this.addDesignationForm.get("description").value)}}addDesignation(t){this.confirmationService.confirm({target:t.target,message:"Are you sure to add this designation?",icon:"pi pi-exclamation-triangle",accept:()=>{this.setDataTransferStatus(),this.subscription=this.designationService.setDesignation(this.getFormData()).subscribe(e=>{this.unsetDataTransferStatus(),this.addDesignationForm.reset(),this.messageService.add({closable:!1,life:6e3,icon:"pi pi-check",summary:e.message})},e=>{this.unsetDataTransferStatus(),this.messageService.add({closable:!1,life:6e3,icon:"pi pi-times",summary:e.error.message})})}})}};i.\u0275fac=function(e){return new(e||i)(l(D),l(x),l(G),l(E),l(F))},i.\u0275cmp=b({type:i,selectors:[["app-add-designation"]],decls:22,vars:7,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[3,"formGroup"],[1,"grid","p-fluid","mt-3"],[1,"field","col-12","md:col-4"],[1,"p-float-label"],["formControlName","code","type","text","id","code","pInputText",""],["for","code"],[1,"field","col-12","md:col-8"],["formControlName","description","type","text","id","description","pInputText",""],["for","description"],[1,"block","md:flex","md:justify-content-between"],["styleClass","justify-content-center w-full md:w-8rem mb-3 md:mb-0","pRipple","","label","Back","icon","pi pi-arrow-left","routerLink","/system_data/designations",1,"block",3,"raised","disabled"],["styleClass","justify-content-center w-full md:w-11rem","pRipple","","severity","success",1,"block",3,"raised","label","icon","disabled","click"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),a(4,"Add New Designation"),o(),n(5,"p"),a(6,"Please provide the necessary details to add a new designation."),o(),n(7,"form",3)(8,"div",4)(9,"div",5)(10,"span",6),m(11,"input",7),n(12,"label",8),a(13,"Designation code"),o()()(),n(14,"div",9)(15,"span",6),m(16,"input",10),n(17,"label",11),a(18,"Description of the designation"),o()()()()(),n(19,"div",12),m(20,"p-button",13),n(21,"p-button",14),h("click",function(c){return r.addDesignation(c)}),o()()()()()),e&2&&(p(7),u("formGroup",r.addDesignationForm),p(13),u("raised",!0)("disabled",r.transferData),p(1),u("raised",!0)("label",r.submitBtnLabel)("icon",r.submitBtnIcon)("disabled",r.addDesignationForm.invalid||r.transferData))},dependencies:[S,C,w,T,q,U,O,$,Q,H]});let s=i;return s})();var Ae=(()=>{let i=class i{constructor(t,e,r,d,c,Re,Ve,Le){this.confirmationService=t,this.messageService=e,this.utilityService=r,this.designationService=d,this.encryptionService=c,this.route=Re,this.router=Ve,this.store=Le,this.designationId="",this.designation={},this.transferData=!1,this.submitBtnIcon="pi pi-sync",this.submitBtnLabel="Update Designation",this.subscription=new y,this.editDesignationForm=new _({})}ngOnInit(){this.editDesignationForm=new _({code:new I("",[g.required,this.utilityService.trimmedEmptyValidator,g.maxLength(20)]),description:new I("",[g.required,this.utilityService.trimmedEmptyValidator,g.maxLength(80)])}),this.subscription=this.route.paramMap.subscribe(t=>{this.designationId=t.get("id")??"",this.getDesignation(this.designationId)})}ngOnDestroy(){this.subscription.unsubscribe()}setDataTransferStatus(){this.editDesignationForm.disable(),this.transferData=!0,this.submitBtnIcon="pi pi-spinner pi-spin",this.submitBtnLabel="Please wait"}unsetDataTransferStatus(){this.editDesignationForm.enable(),this.transferData=!1,this.submitBtnIcon="pi pi-plus",this.submitBtnLabel="Update Designation"}getDesignation(t){setTimeout(()=>{this.store.dispatch(P({status:!0}))}),this.subscription=this.designationService.getDesignation(t).pipe(B(e=>e.message)).subscribe(e=>{let r=["code","description","createdBy"],d=R({},e);this.encryptionService.decryptObjectValues(d,r),this.designation=d,this.editDesignationForm.patchValue(d),setTimeout(()=>{this.store.dispatch(P({status:!1}))})},e=>{this.messageService.add({closable:!1,life:6e3,icon:"pi pi-times",summary:e.error.message}),setTimeout(()=>{this.store.dispatch(P({status:!1}))}),this.router.navigate(["/system_data/designations"])})}getFormData(){return{id:this.designation._id,description:this.encryptionService.encryptData(this.editDesignationForm.get("description").value)}}updateDesignation(t){this.confirmationService.confirm({target:t.target,message:"Are you sure to edit this designation?",icon:"pi pi-exclamation-triangle",accept:()=>{this.setDataTransferStatus(),this.subscription=this.designationService.updateDesignation(this.getFormData()).subscribe(e=>{this.unsetDataTransferStatus(),this.messageService.add({closable:!1,life:6e3,icon:"pi pi-check",summary:e.message})},e=>{this.unsetDataTransferStatus(),this.messageService.add({closable:!1,life:6e3,icon:"pi pi-times",summary:e.error.message})})}})}};i.\u0275fac=function(e){return new(e||i)(l(D),l(x),l(G),l(E),l(F),l(le),l(N),l(ve))},i.\u0275cmp=b({type:i,selectors:[["app-edit-designation"]],decls:22,vars:7,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[3,"formGroup"],[1,"grid","p-fluid","mt-3"],[1,"field","col-12","md:col-4"],[1,"p-float-label"],["formControlName","code","type","text","id","code","readonly","","pInputText",""],["for","code"],[1,"field","col-12","md:col-8"],["formControlName","description","type","text","id","description","pInputText",""],["for","description"],[1,"block","md:flex","md:justify-content-between"],["styleClass","justify-content-center w-full md:w-8rem mb-3 md:mb-0","pRipple","","label","Back","icon","pi pi-arrow-left","routerLink","/system_data/designations",1,"block",3,"raised","disabled"],["styleClass","justify-content-center w-full md:w-12rem","pRipple","","severity","success",1,"block",3,"raised","label","icon","disabled","click"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),a(4,"Edit Designation"),o(),n(5,"p"),a(6,"You can edit/update details of designations details through this page."),o(),n(7,"form",3)(8,"div",4)(9,"div",5)(10,"span",6),m(11,"input",7),n(12,"label",8),a(13,"Designation code"),o()()(),n(14,"div",9)(15,"span",6),m(16,"input",10),n(17,"label",11),a(18,"Description of the designation"),o()()()()(),n(19,"div",12),m(20,"p-button",13),n(21,"p-button",14),h("click",function(c){return r.updateDesignation(c)}),o()()()()()),e&2&&(p(7),u("formGroup",r.editDesignationForm),p(13),u("raised",!0)("disabled",r.transferData),p(1),u("raised",!0)("label",r.submitBtnLabel)("icon",r.submitBtnIcon)("disabled",r.editDesignationForm.invalid||r.transferData))},dependencies:[S,C,w,T,q,U,O,$,Q,H]});let s=i;return s})();var Ye=[{path:"",component:je},{path:"add",component:ke},{path:"edit/:id",component:Ae}],Me=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=L({type:i}),i.\u0275inj=V({imports:[X.forChild(Ye),X]});let s=i;return s})();var jt=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=L({type:i}),i.\u0275inj=V({imports:[ae,Me,ge,Ce,me,be,ue,ye]});let s=i;return s})();export{jt as DesignationsModule};
